{% extends "admin_base.html" %}
{% block title %}Editar Orden #{{ order.id }}{% endblock %}
{% block content %}
<h2>Editar Orden #{{ order.id }}</h2>

<section class="form-section">
  <h3>Estado de pago</h3>
  <form method="post" action="/admin/orders/{{ order.id }}/edit" class="form-grid">
    <select name="payment_status" required style="grid-column: span 3;">
      <option value="pending" {% if order.payment_status == 'pending' %}selected{% endif %}>Pending</option>
      <option value="paid" {% if order.payment_status == 'paid' %}selected{% endif %}>Paid</option>
      <option value="completed" {% if order.payment_status == 'completed' %}selected{% endif %}>Completed</option>
      <option value="failed" {% if order.payment_status == 'failed' %}selected{% endif %}>Failed</option>
      <option value="refunded" {% if order.payment_status == 'refunded' %}selected{% endif %}>Refunded</option>
    </select>

    <button type="submit">Guardar Cambios</button>
  </form>

  <div style="margin-top: 16px;">
    <a href="/admin/orders" style="color: var(--text-muted); font-size: 14px;">← Volver a órdenes</a>
  </div>
</section>

<section class="detail-card" style="margin-top: 24px;">
  <h3>Información de la orden</h3>
  <p><strong>Usuario:</strong> {{ order.user_name }} ({{ order.user_email }})</p>
  <p><strong>Carrito:</strong> <a href="/admin/carts/{{ order.cart_id }}">#{{ order.cart_id }}</a></p>
  <p><strong>Total:</strong> ${{ "%.2f"|format(order.total) }}</p>
  <p><strong>Creada:</strong> {{ order.created_at }}</p>
</section>
{% endblock %}