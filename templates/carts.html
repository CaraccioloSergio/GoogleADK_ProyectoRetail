{% extends "admin_base.html" %}
{% block title %}Carritos - Admin{% endblock %}
{% block content %}
<h2>Carritos</h2>

<section class="form-section">
  <h3>Buscar carritos</h3>
  <form method="get" action="/admin/carts" class="form-grid">
    <input type="text" name="q_user" placeholder="Usuario contiene..." value="{{ q_user or '' }}">
    <input type="text" name="q_email" placeholder="Email exacto..." value="{{ q_email or '' }}">
    <input type="text" name="q_status" placeholder="status exacto..." value="{{ q_status or '' }}">
    <button type="submit">Buscar</button>
  </form>
</section>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Usuario</th>
      <th>Email</th>
      <th>Estado</th>
      <th>Items</th>
      <th>Total</th>
      <th>Creado</th>
      <th>Actualizado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for c in carts %}
    <tr>
      <td><a href="/admin/carts/{{ c.id }}">#{{ c.id }}</a></td>
      <td>{{ c.user_name }}</td>
      <td>{{ c.user_email }}</td>
      <td>{{ c.status }}</td>
      <td>{{ c.items_count }}</td>
      <td>${{ "%.2f"|format(c.total) }}</td>
      <td>{{ c.created_at }}</td>
      <td>{{ c.updated_at }}</td>
      <td>
        <a href="/admin/carts/{{ c.id }}/edit">Editar</a>
        &nbsp;|&nbsp;
        <form method="post" action="/admin/carts/{{ c.id }}/delete" style="display:inline;" onsubmit="return confirm('¿Seguro que querés borrar el carrito #{{c.id}}? Se borran sus items.');">
          <button type="submit" style="background:transparent;border:none;color:#ff4b6a;cursor:pointer;padding:0;">Borrar</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
